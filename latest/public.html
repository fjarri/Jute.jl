<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public API · Jute.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Jute.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><a class="toctext" href="manual.html">Manual</a></li><li class="current"><a class="toctext" href="public.html">Public API</a><ul class="internal"><li><a class="toctext" href="#Entry-point-1">Entry point</a></li><li><a class="toctext" href="#Testcases-and-fixtures-1">Testcases and fixtures</a></li><li><a class="toctext" href="#Assertions-1">Assertions</a></li><li><a class="toctext" href="#Testcase-tags-1">Testcase tags</a></li><li><a class="toctext" href="#Built-in-fixtures-1">Built-in fixtures</a></li><li><a class="toctext" href="#Utilities-1">Utilities</a></li></ul></li><li><a class="toctext" href="internals.html">Internals</a></li><li><a class="toctext" href="history.html">Version history</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="public.html">Public API</a></li></ul><a class="edit-page" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/docs/src/public.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Public API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Public-API-1" href="#Public-API-1">Public API</a></h1><h2><a class="nav-anchor" id="Entry-point-1" href="#Entry-point-1">Entry point</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.runtests" href="#Jute.runtests"><code>Jute.runtests</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">runtests(; options=nothing)</code></pre><p>Run the test suite.</p><p>This function has several side effects:</p><ul><li><p>it parses the command-line arguments, using them to build the dictionary of run options (see <a href="manual.html#run_options_manual-1">Run options</a> in the manual for the list);</p></li><li><p>it picks up and includes the test files, selected according to the options.</p></li></ul><p><code>options</code> must be a dictionary with the keys corresponding to some of the options from the above list. If <code>options</code> is given, command-line arguments are not parsed.</p><p>Returns <code>0</code> if there are no failed tests, <code>1</code> otherwise.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/runtests.jl#L204-L219">source</a><br/></section><h2><a class="nav-anchor" id="Testcases-and-fixtures-1" href="#Testcases-and-fixtures-1">Testcases and fixtures</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.testcase" href="#Jute.testcase"><code>Jute.testcase</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">testcase(func, params...)</code></pre><p>Define a testcase.</p><p><code>func</code> is a testcase function. The number of function parameters must be equal to the number of parametrizing fixtures given in <code>params</code>. This function will be called with all combinations of values of fixtures from <code>params</code>.</p><p><code>params</code> are either fixtures, iterables or pairs of two iterables used to parametrize the function. In the latter case, the first iterable will be used to produce the values, and the second one to produce the corresponding labels (for logging).</p><p>Returns a <a href="internals.html#Jute.Testcase"><code>Testcase</code></a> object.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/testcases.jl#L26-L43">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.fixture" href="#Jute.fixture"><code>Jute.fixture</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">fixture(func, params...; instant_teardown=false)</code></pre><p>Create a global fixture (a fixture set up once before all the testcases that use it and torn down after they finish).</p><p><code>func</code> is a function with <code>length(params) + 1</code> parameters. The first parameter takes a function <code>produce(values[, labels])</code> that is used to return the fixture iterable (with an optional iterable of labels). The rest take the values of the dependent fixtures from <code>params</code>.</p><p><code>params</code> are either fixtures (constant of global only), iterables or pairs of two iterables used to parametrize the fixture.</p><p>Returns a <a href="internals.html#Jute.GlobalFixture"><code>GlobalFixture</code></a> object.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/fixtures.jl#L67-L82">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.local_fixture" href="#Jute.local_fixture"><code>Jute.local_fixture</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">local_fixture(func, params...)</code></pre><p>Create a local fixture (a fixture set up before each testcase that uses it and torn down afterwards).</p><p><code>func</code> is a function with <code>length(params) + 1</code> parameters. The first parameter takes a function <code>produce(value[, label])</code> that is used to return the fixture value (with an optional label). The rest take the values of the dependent fixtures from <code>params</code>.</p><p><code>params</code> are either fixtures (of any type), iterables or pairs of two iterables used to parametrize the fixture.</p><p>Returns a <a href="internals.html#Jute.LocalFixture"><code>LocalFixture</code></a> object.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/fixtures.jl#L120-L135">source</a><br/></section><h2><a class="nav-anchor" id="Assertions-1" href="#Assertions-1">Assertions</a></h2><p>The following assertions are re-exported from <code>Base.Test</code> and can be used inside <code>Jute</code> testcases.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.Test.@test" href="#Base.Test.@test"><code>Base.Test.@test</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@test ex
@test f(args...) key=val ...</code></pre><p>Tests that the expression <code>ex</code> evaluates to <code>true</code>. Returns a <code>Pass</code> <code>Result</code> if it does, a <code>Fail</code> <code>Result</code> if it is <code>false</code>, and an <code>Error</code> <code>Result</code> if it could not be evaluated.</p><p>The <code>@test f(args...) key=val...</code> form is equivalent to writing <code>@test f(args..., key=val...)</code> which can be useful when the expression is a call using infix syntax such as approximate comparisons:</p><pre><code class="language-none">@test a ≈ b atol=ε</code></pre><p>This is equivalent to the uglier test <code>@test ≈(a, b, atol=ε)</code>. It is an error to supply more than one expression unless the first is a call expression and the rest are assignments (<code>k=v</code>).</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/tree/42abb037cec37e06e1d8c96282e2498605b7459b/base/test.jl#L254-L271">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.Test.@test_throws" href="#Base.Test.@test_throws"><code>Base.Test.@test_throws</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@test_throws exception expr</code></pre><p>Tests that the expression <code>expr</code> throws <code>exception</code>. The exception may specify either a type, or a value (which will be tested for equality by comparing fields). Note that <code>@test_throws</code> does not support a trailing keyword form.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/tree/42abb037cec37e06e1d8c96282e2498605b7459b/base/test.jl#L435-L442">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.Test.@test_broken" href="#Base.Test.@test_broken"><code>Base.Test.@test_broken</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@test_broken ex
@test_broken f(args...) key=val ...</code></pre><p>Indicates a test that should pass but currently consistently fails. Tests that the expression <code>ex</code> evaluates to <code>false</code> or causes an exception. Returns a <code>Broken</code> <code>Result</code> if it does, or an <code>Error</code> <code>Result</code> if the expression evaluates to <code>true</code>.</p><p>The <code>@test_broken f(args...) key=val...</code> form works as for the <code>@test</code> macro.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/tree/42abb037cec37e06e1d8c96282e2498605b7459b/base/test.jl#L279-L289">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.Test.@test_skip" href="#Base.Test.@test_skip"><code>Base.Test.@test_skip</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@test_skip ex
@test_skip f(args...) key=val ...</code></pre><p>Marks a test that should not be executed but should be included in test summary reporting as <code>Broken</code>. This can be useful for tests that intermittently fail, or tests of not-yet-implemented functionality.</p><p>The <code>@test_skip f(args...) key=val...</code> form works as for the <code>@test</code> macro.</p></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/tree/42abb037cec37e06e1d8c96282e2498605b7459b/base/test.jl#L298-L307">source</a><br/></section><p>This is an additional assertion, allowing one to record an arbitrary value as a test result.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.@test_result" href="#Jute.@test_result"><code>Jute.@test_result</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@test_result expr</code></pre><p>Records a result from the test. The result of <code>expr</code> will be displayed in the report by calling <code>string()</code> on it.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/run_testcase.jl#L10-L15">source</a><br/></section><h2><a class="nav-anchor" id="Testcase-tags-1" href="#Testcase-tags-1">Testcase tags</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.tag" href="#Jute.tag"><code>Jute.tag</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">tag(::Symbol)</code></pre><p>Returns a function that tags a testcase with the given tag:</p><pre><code class="language-none">tc = tag(:foo)(testcase() do
    ... something
end)</code></pre><p>Testcases can be filtered in/out using <a href="manual.html#run_options_manual-1">run options</a>. It is convenient to use the <a href="public.html#Jute.:&lt;|"><code>&lt;|</code></a> operator:</p><pre><code class="language-none">tc =
    tag(:foo) &lt;|
    testcase() do
        ... something
    end</code></pre><p>Note that <a href="public.html#Jute.tag"><code>tag</code></a> and <a href="public.html#Jute.untag"><code>untag</code></a> commands are applied from inner to outer.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/testcases.jl#L86-L105">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.untag" href="#Jute.untag"><code>Jute.untag</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">untag(::Symbol)</code></pre><p>Returns a function that untags a testcase with the given tag. See <a href="public.html#Jute.tag"><code>tag</code></a> for more details.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/testcases.jl#L111-L116">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.:&lt;|" href="#Jute.:&lt;|"><code>Jute.:&lt;|</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">&lt;|(f, x) === f(x)</code></pre><p>A helper operator that makes applying testcase tags slightly more graceful. See <a href="public.html#Jute.tag"><code>tag</code></a> for an example.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/testcases.jl#L122-L127">source</a><br/></section><h2><a class="nav-anchor" id="Built-in-fixtures-1" href="#Built-in-fixtures-1">Built-in fixtures</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.temporary_dir" href="#Jute.temporary_dir"><code>Jute.temporary_dir</code></a> — <span class="docstring-category">Constant</span>.</div><div><p>A local fixture that creates a temporary directory and returns its name; the directory and all its contents is removed during the teardown.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/builtin_fixtures.jl#L1-L4">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.run_options" href="#Jute.run_options"><code>Jute.run_options</code></a> — <span class="docstring-category">Constant</span>.</div><div><p>A global fixture that returns the dictionary with the current run options (see <a href="manual.html#run_options_manual-1"><code>Run options</code></a> in the manual for the full list.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/builtin_fixtures.jl#L12-L15">source</a><br/></section><h2><a class="nav-anchor" id="Utilities-1" href="#Utilities-1">Utilities</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.rowmajor_product" href="#Jute.rowmajor_product"><code>Jute.rowmajor_product</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">rowmajor_product(xss...)</code></pre><p>Iterate over all combinations in the cartesian product of the inputs. Similar to <code>IterTools.product()</code>, but iterates in row-major order (that is, the first iterator is iterated the slowest).</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/utils.jl#L97-L103">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.pprint_time" href="#Jute.pprint_time"><code>Jute.pprint_time</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">pprint_time(s; meaningful_digits=0)</code></pre><p>Returns a string that represents a given time (in seconds) as a value scaled to the appropriate unit (minutes, hours, milliseconds etc) and rounded to a given number of meaningful digits (if it is smaller than a minute). If the latter is <code>0</code>, the result is rounded to an integer at all times.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/utils.jl#L1-L8">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Jute.with_output_capture" href="#Jute.with_output_capture"><code>Jute.with_output_capture</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">with_output_capture(func, pass_through=false)</code></pre><p>Execute the callable <code>func</code> and capture its output (both <code>STDOUT</code> and <code>STDERR</code>) in a string. Returns a tuple of the <code>func</code>&#39;s return value and its output. If <code>pass_through</code> is <code>true</code>, does not capture anything and returns an empty string instead of the output.</p></div><a class="source-link" target="_blank" href="https://github.com/fjarri/Jute.jl/tree/50236f674e93e62508baf3b07fb200bd9fedf432/src/utils.jl#L154-L161">source</a><br/></section><footer><hr/><a class="previous" href="manual.html"><span class="direction">Previous</span><span class="title">Manual</span></a><a class="next" href="internals.html"><span class="direction">Next</span><span class="title">Internals</span></a></footer></article></body></html>
